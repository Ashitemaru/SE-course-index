# TypeScript 初探与游戏逻辑

## 实验目标

通过本 Step，我们希望你能够掌握基本的 TypeScript 语法并且能够使用 TypeScript 语言编写完成康威生命游戏的核心逻辑。

## 实验步骤

首先，你需要仔细阅读并理解游戏规则，对康威生命游戏形成基本的认知。这里我们提供一个示例网站，你可以在该网站上尝试游玩康威生命游戏，以加深对该游戏规则的理解（需要注意，该网站所实现的棋盘是无限的，与本作业要求的并不一致）：

- 康威生命游戏示例网站 <https://playgameoflife.com/>

之后，你需要在 `src/utils/logic.ts` 文件的函数 `stepBoard` 之中，注释 `// Step 1 BEGIN` 与 `// Step 1 END` 之间的部分填充你的代码，编写完成康威生命游戏的核心逻辑。注意，请勿改动其余部分的代码，请勿新建文件、删除文件。

在编写完成后，你可以在项目根目录下，运行命令 `yarn test logic` 执行我们编写好的单元测试，如果显示下述提示信息则代表你完成了 Step 1：

![](../static/react/step1-test-pass.png)

如果你在编写游戏的核心逻辑上遇到了困难，可以打开 `test/logic.test.ts` 文件，其中的 `stepBoardGT` 函数是我们提供的样例实现，可供参考。

### 游戏规则

本作业中的康威生命游戏基于一个 $100 \times 100$ 的棋盘，棋盘上的每一个格子代表一个**细胞**。细胞具有两种状态，分别为**存活**（在代码中用 `1` 代表）以及**死亡**（在代码中用 `0` 代表）。

每个细胞在下一时刻的状态取决于其在这个时刻的状态，以及其所有**邻居**在这个时刻的状态。每一个细胞都有 8 个邻居，这里由于棋盘大小有限，故采用循环相邻的定义方式。具体请看下图，这里用一个 $8 \times 8$ 的棋盘作为简化示例，对于每一个红色的细胞，8 个黄色的细胞称之为其邻居：

![](../static/react/neigbour.png)

基于上述定义，每个细胞在下一个时刻的状态按照下述规则确定：

- 如果该细胞在这个时刻存活
    - （孤独死亡）如果其邻居中存活的个数不多于 1 个，则该细胞在下一时刻死亡
    - （人口超载）如果其邻居中存活的个数不少于 4 个，则该细胞在下一时刻死亡
    - （环境适中）如果其邻居中存活的个数为 2 个或者 3 个，则该细胞在下一时刻继续存活
- 如果该细胞在这个时刻死亡
    - （细胞繁殖）如果其邻居中存活的个数为 3 个，则该细胞在下一时刻存活
    - 其余情况下，该细胞保持死亡状态

### 代码说明

在 `src/utils/logic.ts` 文件的前两行，我们规定了棋盘尺寸以及表示棋盘的类型如下：

```typescript
export const BOARD_LENGTH = 100;
export type Board = (0 | 1)[][];
```

这说明我们使用一个二维数组表示棋盘，二维数组中的每一个元素代表一个细胞，元素的取值为 `0` 或者 `1`，分别代表细胞死亡与细胞存活。

你需要填充的 `stepBoard` 函数接收一个 `Board` 类型的参数 `board`，其表示这个时刻的棋盘状态。该函数的返回值为 `Board` 类型，其表示下一时刻的棋盘状态。

## 实验评分

本 Step 总分为 5 分。

本 Step 采用自动化评分。我们会检查 Tsinghua Git CI 中是否如下显示该 Step 的通过信息。若有，则你获得该 Step 所有分数：

【TODO：CI 通过界面】

我们保证 CI 判定通过的方式与你本地完全一致（即通过 `yarn test logic` 命令判定）。

## 知识讲解

这里我们会简单讲解 TypeScript 的语法。

【TODO：讲解 TypeScript】